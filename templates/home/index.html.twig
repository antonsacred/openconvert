{% extends 'base.html.twig' %}

{% block title %}{{ page_title }} | OpenConvert{% endblock %}

{% block body %}
    <div
        class="bg-base-200"
        data-controller="conversion-selector"
        data-conversion-selector-formats-by-source-value="{{ formats_by_source|json_encode|e('html_attr') }}"
        data-conversion-selector-home-page-url-value="{{ path('app_home') }}"
        data-conversion-selector-source-page-template-value="{{ source_page_template }}"
        data-conversion-selector-pair-page-template-value="{{ pair_page_template }}"
        {% if selected_to is not empty %}data-conversion-selector-selected-to-value="{{ selected_to }}"{% endif %}
    >
        <section class="oc-hero text-neutral-content">
            {% include 'components/header.html.twig' %}

            <div class="mx-auto max-w-6xl px-4 pb-24 pt-14 md:pb-28">
                <div class="grid gap-10 lg:grid-cols-2 lg:items-center">
                    <div class="space-y-5">
                        <h1 class="text-4xl font-bold md:text-5xl">{{ hero_title }}</h1>
                        <p class="max-w-xl text-lg/8 text-neutral-content/90">
                            {{ hero_description }}
                        </p>
                    </div>

                    <div class="card border border-white/10 bg-black/20 shadow-xl">
                        <div class="card-body gap-6">
                            <h2 class="card-title text-2xl">Choose conversion</h2>
                            <form
                                id="conversion-selector"
                                method="get"
                                class="flex flex-wrap items-center gap-3 text-2xl font-medium"
                            >
                                <span>convert</span>
                                <select
                                    class="select select-bordered w-28 bg-base-100 text-base-content sm:w-32"
                                    name="from"
                                    aria-label="Source format"
                                    data-conversion-selector-target="fromSelect"
                                    data-action="change->conversion-selector#onFromChange"
                                >
                                    <option value="" {% if selected_from is empty %}selected{% endif %}>from</option>
                                    {% for source in formats_by_source|keys %}
                                        <option value="{{ source }}" {% if selected_from == source %}selected{% endif %}>{{ source }}</option>
                                    {% endfor %}
                                </select>
                                <span>to</span>
                                <select
                                    class="select select-bordered w-28 bg-base-100 text-base-content sm:w-32"
                                    name="to"
                                    aria-label="Target format"
                                    data-conversion-selector-target="toSelect"
                                    data-action="change->conversion-selector#onToChange"
                                    {% if selected_from is empty %}disabled{% endif %}
                                >
                                    <option value="" {% if selected_to is empty %}selected{% endif %}>to</option>
                                    {% for target in available_targets %}
                                        <option value="{{ target }}" {% if selected_to == target %}selected{% endif %}>{{ target }}</option>
                                    {% endfor %}
                                </select>
                            </form>
                            <p class="text-sm text-neutral-content/70">
                                Pick source and target formats, then continue with file selection.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        {% include 'components/upload_queue_section.html.twig' %}

        {% if page_mode == 'home' %}
            {% include 'components/home_info_section.html.twig' %}
        {% else %}
            {% include 'components/wiki_info_section.html.twig' %}
        {% endif %}

        {% include 'components/footer.html.twig' %}
    </div>
{% endblock %}
